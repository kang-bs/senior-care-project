<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>공고 작성 - 사람이음</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background-color: #f8f9fa;
        max-width: 480px;
        margin: 0 auto;
        padding-bottom: 100px;
        position: relative;
      }

      /* 헤더 */
      .header {
        background: white;
        padding: 15px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .back-btn {
        background: none;
        border: none;
        font-size: 18px;
        cursor: pointer;
        color: #333;
      }

      .header-title {
        font-size: 18px;
        font-weight: bold;
        color: #333;
      }

      .save-btn {
        background: #3498db;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
      }

      .save-btn:hover {
        background: #2980b9;
      }

      /* 폼 컨테이너 */
      .form-container {
        background: white;
        margin: 20px;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        font-weight: bold;
        color: #333;
        margin-bottom: 8px;
        font-size: 14px;
      }

      .form-input {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        background: white;
      }

      .form-input:focus {
        outline: none;
        border-color: #4a90e2;
      }

      .form-textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        background: white;
        min-height: 100px;
        resize: vertical;
      }

      .form-select {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        background: white;
      }

      /* 체크박스 그룹 */
      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .checkbox-item {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .checkbox-item input[type="checkbox"] {
        width: 18px;
        height: 18px;
      }

      .checkbox-item label {
        font-size: 14px;
        color: #333;
        cursor: pointer;
      }

      /* 시간 입력 그룹 */
      .time-group {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .time-input {
        flex: 1;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
      }

      .time-separator {
        font-size: 16px;
        color: #666;
      }

      /* 버튼 그룹 */
      .button-group {
        display: flex;
        gap: 10px;
        margin-top: 30px;
      }

      .btn-cancel {
        flex: 1;
        padding: 15px;
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
      }

      .btn-submit {
        flex: 1;
        padding: 15px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
      }

      .btn-submit:hover {
        background: #2980b9;
      }

      .btn-cancel:hover {
        background: #5a6268;
      }

      /* 플래시 메시지 */
      .flash-messages {
        margin: 20px;
      }

      .flash-message {
        padding: 12px;
        border-radius: 4px;
        margin-bottom: 10px;
      }

      .flash-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .flash-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .required {
        color: #e74c3c;
      }

      /* 하단 네비게이션 */
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 480px;
        background: white;
        border-top: 1px solid #e9ecef;
        display: flex;
        justify-content: space-around;
        padding: 12px 0;
        z-index: 1000;
      }

      .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        color: #666;
        text-decoration: none;
        font-size: 12px;
        transition: color 0.3s;
      }

      .nav-item.active {
        color: #3498db;
      }

      .nav-icon {
        width: 24px;
        height: 24px;
      }

      /* 버튼 그룹 */
      .button-group-horizontal {
        display: flex;
        gap: 10px;
        margin-top: 8px;
      }

      .btn-option {
        flex: 1;
        padding: 12px 20px;
        border: 2px solid #e9ecef;
        background: white;
        color: #666;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
      }

      .btn-option:hover {
        border-color: #3498db;
        color: #3498db;
      }

      .btn-option.active {
        border-color: #3498db;
        background: #3498db;
        color: white;
      }

      .btn-option-small {
        flex: 1;
        padding: 10px 16px;
        border: 2px solid #e9ecef;
        background: white;
        color: #666;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
      }

      .btn-option-small:hover {
        border-color: #3498db;
        color: #3498db;
      }

      .btn-option-small.active {
        border-color: #3498db;
        background: #3498db;
        color: white;
      }
    </style>
  </head>
  <body>
    <!-- 헤더 -->
    <div class="header">
      <button class="back-btn" onclick="history.back()">←</button>
      <div class="header-title">공고 작성</div>
      <button
        class="save-btn"
        onclick="document.getElementById('jobForm').submit()"
      >
        저장
      </button>
    </div>

    <!-- 플래시 메시지 -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
      <div class="flash-message flash-{{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %} {% endwith %}

    <!-- 폼 -->
    <form id="jobForm" method="POST" class="form-container">
      <!-- 기본 정보 -->
      <div class="form-group">
        <label class="form-label">제목 <span class="required">*</span></label>
        <input
          type="text"
          name="title"
          class="form-input"
          placeholder="공고 제목을 입력하세요"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label"
          >담당자명 <span class="required">*</span></label
        >
        <input
          type="text"
          name="company"
          class="form-input"
          placeholder="담당자명을 입력하세요"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label"
          >모집 형태 <span class="required">*</span></label
        >
        <div class="button-group-horizontal">
          <button
            type="button"
            class="btn-option"
            data-value="정규직"
            onclick="selectRecruitmentType(this, '정규직')"
          >
            정규직
          </button>
          <button
            type="button"
            class="btn-option"
            data-value="일용직"
            onclick="selectRecruitmentType(this, '일용직')"
          >
            일용직
          </button>
        </div>
        <input
          type="hidden"
          name="recruitment_type"
          id="recruitment_type"
          required
        />
      </div>

      <!-- 일용직 선택시 나타나는 기간 선택 -->
      <div class="form-group" id="work_period_group" style="display: none">
        <label class="form-label"
          >근무 기간 <span class="required">*</span></label
        >
        <div class="button-group-horizontal">
          <button
            type="button"
            class="btn-option-small"
            data-value="1개월 이상"
            onclick="selectWorkPeriod(this, '1개월 이상')"
          >
            1개월 이상
          </button>
          <button
            type="button"
            class="btn-option-small"
            data-value="3개월 이상"
            onclick="selectWorkPeriod(this, '3개월 이상')"
          >
            3개월 이상
          </button>
          <button
            type="button"
            class="btn-option-small"
            data-value="6개월 이상"
            onclick="selectWorkPeriod(this, '6개월 이상')"
          >
            6개월 이상
          </button>
        </div>
        <input type="hidden" name="work_period" id="work_period" />
      </div>

      <!-- 근무 요일 -->
      <div class="form-group">
        <label class="form-label">근무 요일</label>
        <div class="checkbox-group">
          <div class="checkbox-item">
            <input type="checkbox" id="monday" name="work_monday" />
            <label for="monday">월</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="tuesday" name="work_tuesday" />
            <label for="tuesday">화</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="wednesday" name="work_wednesday" />
            <label for="wednesday">수</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="thursday" name="work_thursday" />
            <label for="thursday">목</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="friday" name="work_friday" />
            <label for="friday">금</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="saturday" name="work_saturday" />
            <label for="saturday">토</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="sunday" name="work_sunday" />
            <label for="sunday">일</label>
          </div>
        </div>
      </div>

      <!-- 근무 시간 -->
      <div class="form-group">
        <label class="form-label">근무 시간</label>
        <div class="time-group">
          <input type="time" name="work_start_time" class="time-input" />
          <span class="time-separator">~</span>
          <input type="time" name="work_end_time" class="time-input" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">급여</label>
        <input
          type="text"
          name="salary"
          class="form-input"
          placeholder="예: 시급 10,000원, 월급 2,500,000원"
        />
      </div>

      <div class="form-group">
        <label class="form-label">근무 지역</label>
        <input
          type="text"
          name="region"
          class="form-input"
          placeholder="예: 서울시 강남구"
        />
      </div>

      <div class="form-group">
        <label class="form-label">모집 인원</label>
        <input
          type="number"
          name="recruitment_count"
          class="form-input"
          placeholder="모집 인원 수"
          min="1"
        />
      </div>

      <div class="form-group">
        <label class="form-label">연락처</label>
        <input
          type="tel"
          name="contact_phone"
          class="form-input"
          placeholder="연락 가능한 전화번호"
        />
      </div>

      <div class="form-group">
        <label class="form-label"
          >상세 설명 <span class="required">*</span></label
        >
        <textarea
          name="description"
          class="form-textarea"
          placeholder="업무 내용, 자격 요건, 우대 사항 등을 자세히 작성해주세요"
          required
        ></textarea>
      </div>

      <!-- 버튼 그룹 -->
      <div class="button-group">
        <button type="button" class="btn-cancel" onclick="history.back()">
          취소
        </button>
        <button type="submit" class="btn-submit">등록하기</button>
      </div>
    </form>

    <!-- 하단 네비게이션 -->
    <div class="bottom-nav">
      <a href="#" class="nav-item">
        <svg class="nav-icon" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
          />
        </svg>
        <span>찾기</span>
      </a>
      <a href="{{ url_for('jobs.bookmark_list') }}" class="nav-item">
        <svg class="nav-icon" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
          />
        </svg>
        <span>찜</span>
      </a>
      <a href="{{ url_for('auth.main') }}" class="nav-item">
        <svg class="nav-icon" fill="currentColor" viewBox="0 0 24 24">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
        </svg>
        <span>홈</span>
      </a>
      <a href="#" class="nav-item">
        <svg class="nav-icon" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"
          />
        </svg>
        <span>채팅</span>
      </a>
      <a href="{{ url_for('auth.profile') }}" class="nav-item">
        <svg class="nav-icon" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
          />
        </svg>
        <span>내정보</span>
      </a>
    </div>

    <script>
      function selectRecruitmentType(button, value) {
        // 모든 버튼에서 active 클래스 제거
        document.querySelectorAll(".btn-option").forEach((btn) => {
          btn.classList.remove("active");
        });

        // 선택된 버튼에 active 클래스 추가
        button.classList.add("active");

        // hidden input에 값 설정
        document.getElementById("recruitment_type").value = value;

        // 일용직 선택시 기간 선택 표시
        const workPeriodGroup = document.getElementById("work_period_group");
        if (value === "일용직") {
          workPeriodGroup.style.display = "block";
          document.getElementById("work_period").required = true;
        } else {
          workPeriodGroup.style.display = "none";
          document.getElementById("work_period").required = false;
          document.getElementById("work_period").value = "";
          // 기간 선택 버튼들 초기화
          document.querySelectorAll(".btn-option-small").forEach((btn) => {
            btn.classList.remove("active");
          });
        }
      }

      function selectWorkPeriod(button, value) {
        // 모든 기간 버튼에서 active 클래스 제거
        document.querySelectorAll(".btn-option-small").forEach((btn) => {
          btn.classList.remove("active");
        });

        // 선택된 버튼에 active 클래스 추가
        button.classList.add("active");

        // hidden input에 값 설정
        document.getElementById("work_period").value = value;
      }

      // 폼 제출 전 검증
      document
        .getElementById("jobForm")
        .addEventListener("submit", function (e) {
          const recruitmentType =
            document.getElementById("recruitment_type").value;
          const workPeriod = document.getElementById("work_period").value;

          if (!recruitmentType) {
            alert("모집 형태를 선택해주세요.");
            e.preventDefault();
            return;
          }

          if (recruitmentType === "일용직" && !workPeriod) {
            alert("근무 기간을 선택해주세요.");
            e.preventDefault();
            return;
          }
        });
    </script>
  </body>
</html>
